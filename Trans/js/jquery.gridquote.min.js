!function(a){a.fn.gridQuote=function(b){function r(){clearInterval(d.data("_slideshowID")),p=setInterval(function(){var a=h.data("index");a++,a>g.length-1&&(a=0),g[a].trigger("click")},c.slideshowDelay),d.data("_slideshowID",p)}function t(){j=Math.floor(d.width()/m)-1,d.find(".thumb-container").each(function(){k=Math.floor(a(this).data("index")/(j+1)),a(this).data("row",k)}),h&&(g[Math.min((h.data("row")+1)*j+h.data("row"),g.length-1)].after(e),l&&a("body, html").animate({scrollTop:h.offset().top},300,function(){q&&r()}))}var c={titleFontSize:32,defaultBgColor:"blue",slideshow:!0,slideshowDelay:5e3,pauseByHover:!0,autoScroll:!0,initOpen:!0};b&&a.extend(c,b);var i,m,n,o,d=this,e=a('<div class="quote"></div>').hide(),f=a(".popover"),g=[],h=null,j=0,k=0,l=!1,p=0,q=c.slideshow;d.find(".thumb-container").each(function(b){g[b]=a(this).attr("rel",b).data("index",b),m=a(this).outerWidth(),n=a(this).outerHeight(),j=Math.floor(d.width()/m)-1,k=Math.floor(a(this).data("index")/(j+1)),a(this).data("row",k),a(this).data("position_top",a(this).position().top);var p=f.clone();p.appendTo(a(this)),p.find(".popover-content").html(a(this).data("title"));var s=a(this).data("fontsize")||c.titleFontSize,t=a(this).data("bgcolor")||c.defaultBgColor;p.addClass(t).find(".popover-content").css("font-size",s),a(this).on("click",function(){for(var d=0;k>=d;d++)a(this).data("row")==d&&g[Math.min((d+1)*j+d,g.length-1)].after(e);var m,f=a(this).find(".quote-container").html();a(this).is(h)?l?(e.slideUp("fast"),o&&o.stop(!0).animate({opacity:0},300,function(){a(this).hide()}),l=!1):(e.show().slideDown("fast"),o&&o.show().stop(!0).animate({opacity:1},300),l=!0):(o&&o.stop(!0).animate({opacity:0},300,function(){a(this).hide()}),e.offset().top==i?e.stop(!0).animate({opacity:0},300,function(){e.html(f).animate({opacity:1},300)}):e.hide().html(f).slideDown("fast"),i=e.offset().top,m=a(this).find(".popover"),m.find(".arrow").show().css("opacity",1),m.show().stop(!0).animate({opacity:1},400),l=!0,o=m),c.autoScroll&&!navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&a("body, html").delay(300).animate({scrollTop:a(this).offset().top},600,function(){q&&r()}),h=a(this)})}).on("mouseover",function(){if(!navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&!a(this).is(h)){var c=a(this).find(".popover");c.find(".arrow").hide().css("opacity",0),c.show().css({opacity:0}).animate({opacity:1},400)}}).on("mouseleave",function(){a(this).is(h)||a(this).find(".popover").stop(!0).animate({opacity:0},300,function(){a(this).hide()})}),c.initOpen&&g[0].trigger("click"),d.on("mouseover",function(){c.pauseByHover&&(clearInterval(d.data("_slideshowID")),q=!1)}).on("mouseleave",function(){c.slideshow&&c.pauseByHover&&(q=!0,r())});var s=0;return a(window).on("resize",function(){navigator.userAgent.match(/(iPod|iPhone|iPad)/)||(clearTimeout(s),clearInterval(d.data("_slideshowID")),s=setTimeout(t,300))}),this}}(jQuery);
